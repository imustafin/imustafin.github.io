<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <link
      rel="alternate"
      hreflang="en"
      href="https://imustafin.tatar/projects/pbdoom"
    />

    <link
      rel="alternate"
      hreflang="ru"
      href="https://imustafin.tatar/ru/%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B/pbdoom"
    />

    <link
      rel="alternate"
      hreflang="tt"
      href="https://imustafin.tatar/tt/%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%BB%D0%B0%D1%80/pbdoom"
    />

    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>PBDoom | imustafin.tatar</title>
    <meta name="generator" content="Jekyll v4.3.2" />
    <meta property="og:title" content="PBDoom" />
    <meta name="author" content="Ilgiz Mustafin" />
    <meta property="og:locale" content="en" />
    <meta
      name="description"
      content="PBDoom is a port of the Doom (1993) videogame for PocketBook eInk devices. Downloads are on the official website of PBDoom."
    />
    <meta
      property="og:description"
      content="PBDoom is a port of the Doom (1993) videogame for PocketBook eInk devices. Downloads are on the official website of PBDoom."
    />
    <link rel="canonical" href="https://imustafin.tatar/projects/pbdoom" />
    <meta property="og:url" content="https://imustafin.tatar/projects/pbdoom" />
    <meta property="og:site_name" content="imustafin.tatar" />
    <meta property="og:type" content="article" />
    <meta
      property="article:published_time"
      content="2023-02-26T00:00:00+00:00"
    />
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="PBDoom" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
          "@type": "Person",
          "name": "Ilgiz Mustafin",
          "url": "https://imustafin.tatar"
        },
        "dateModified": "2023-02-26T00:00:00+00:00",
        "datePublished": "2023-02-26T00:00:00+00:00",
        "description": "PBDoom is a port of the Doom (1993) videogame for PocketBook eInk devices. Downloads are on the official website of PBDoom.",
        "headline": "PBDoom",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://imustafin.tatar/projects/pbdoom"
        },
        "url": "https://imustafin.tatar/projects/pbdoom"
      }
    </script>
    <!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#157878" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/old.css" />

    <script
      src="https://kit.fontawesome.com/e53ce92d09.js"
      crossorigin="anonymous"
    ></script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="apple-mobile-web-app-title" content="imustafin.tatar" />
    <meta name="application-name" content="imustafin.tatar" />
    <meta name="msapplication-TileColor" content="#00aba9" />
    <meta name="theme-color" content="#ffffff" />
  </head>
  <body>
    <div class="with-header-footer">
      <section class="page-header-home">
        <h1 class="project-name">Ilgiz Mustafin's personal website</h1>

        <div class="navigation-wrapper">
          <div></div>

          <ul class="links menu-links">
            <li><a href="/">Main Page</a></li>

            <li><a href="/blog/">Blog</a></li>

            <li><a href="/projects/">Projects</a></li>

            <li><a href="/dictionary/">Dictionary</a></li>
          </ul>

          <ul class="links end-links navigation-first">
            <li><a lang="en" href="/projects/pbdoom">English</a></li>

            <li>
              <a
                lang="ru"
                href="/ru/%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B/pbdoom"
                >Русский</a
              >
            </li>

            <li>
              <a
                lang="tt"
                href="/tt/%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%BB%D0%B0%D1%80/pbdoom"
                >Татарча</a
              >
            </li>
          </ul>
        </div>
      </section>

      <div class="content">
        <section class="main-content">
          <nav class="mb-4">
            <ol
              class="breadcrumbs"
              vocab="https://schema.org/"
              typeof="BreadcrumbList"
            >
              <li property="itemListElement" typeof="ListItem">
                <a
                  property="item"
                  typeof="WebPage"
                  href="https://imustafin.tatar/"
                >
                  <span property="name">Main</span>
                </a>

                <meta property="position" content="0" />
              </li>

              <li property="itemListElement" typeof="ListItem">
                <a
                  property="item"
                  typeof="WebPage"
                  href="https://imustafin.tatar/projects/"
                >
                  <span property="name">Projects</span>
                </a>

                <meta property="position" content="1" />
              </li>

              <li property="itemListElement" typeof="ListItem">
                <span
                  property="item"
                  typeof="WebPage"
                  resource="https://imustafin.tatar/projects/pbdoom"
                >
                  <span property="name">PBDoom</span>
                </span>

                <meta property="position" content="2" />
              </li>
            </ol>
          </nav>

          <article itemscope itemtype="http://schema.org/BlogPosting">
            <header class="post-header">
              <h1 class="post-title" itemprop="name headline">PBDoom</h1>
              <p class="post-meta">
                <time
                  class="post-date"
                  datetime="2023-02-26T00:00:00+00:00"
                  itemprop="datePublished"
                >
                  26 February 2023
                </time>
              </p>
            </header>

            <div
              itemprop="articleBody"
              class="prose lg:prose-lg xl:prose-xl 2xl:prose-2xl max-w-none"
            >
              <p>
                PBDoom is a port of the Doom (1993) videogame for PocketBook
                eInk devices. Downloads are on
                <a href="https://pbdoom.imustafin.tatar"
                  >the official website of PBDoom</a
                >.
              </p>

              <figure class="max-w-xs mx-auto">
                <img
                  src="/assets/pbdoom_inch_6_display.png"
                  alt="PBDoom on a 6 inch display"
                />
                <figcaption>PBDoom on a 6" display</figcaption>
              </figure>

              <p>
                PBDoom is based on
                <a href="https://www.libsdl.org/projects/doom/"
                  >Sam Lantinga’s SDL Doom</a
                >. SDL drawing functions were replaced with PocketBook SDK’s
                <code class="language-plaintext highlighter-rouge"
                  >inkview</code
                >
                library functions. SDL sound functions were completely removed
                from the code for now (not many PocketBooks have speakers
                nowadays, headphones usually can be connected however).
              </p>

              <p>
                The development of PBDoom started in March of 2022. The first
                public release was published in January of 2023.
              </p>

              <p>
                Source code is
                <a href="https://github.com/imustafin/pbdoom"
                  >available on GitHub</a
                >.
              </p>

              <h2 id="why">Why?</h2>
              <p>This project serves several purposes:</p>
              <ol>
                <li>
                  Produce an example of an action game on an eInk reader device
                </li>
                <li>One more custom application for PocketBook</li>
                <li>
                  Gather experience of using the
                  <code class="language-plaintext highlighter-rouge"
                    >inkview</code
                  >
                  library
                </li>
              </ol>

              <p>
                Porting Doom was not a big project. SDL Doom runs on Linux and
                (some) PocketBooks run Linux. Reworking the main graphics output
                function to use
                <code class="language-plaintext highlighter-rouge">inkview</code
                >’s
                <code class="language-plaintext highlighter-rouge"
                  >FillArea</code
                >
                (fill a rectangle with a color) function instead of writing
                pixel data to an SDL surface is easy.
              </p>

              <p>
                However, due to some limitations of the eInk technology (low
                refresh rate, lack of color on some devices) some additional
                work needs to be done on the video output part. In this project
                we explore what needs to be done and what is possible.
              </p>

              <p>
                Also this project has introduced me to
                <a href="https://cmake.org/">CMake</a>.
              </p>

              <h2 id="can-pocketbook-run-doom">Can PocketBook run Doom?</h2>
              <p>
                Yes it can but this is not big news. The developers working on
                PocketBook released a video of Doom running on a PocketBook 360
                Plus back in 2011.
              </p>
              <iframe
                class="aspect-video mx-auto w-full md:w-[600px]"
                src="https://www.youtube-nocookie.com/embed/QOPZrVsCEHg"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen=""
              ></iframe>

              <p>
                This version was produced “during a lunch break” (<a
                  href="https://www.the-ebook.org/forum/viewtopic.php?p=639725"
                  >original message</a
                >,
                <a
                  href="https://web.archive.org/web/20110811143945/https://www.the-ebook.org/forum/viewtopic.php?p=639725"
                  >archived message</a
                >) and was (to my knowledge) released to the public.
              </p>

              <p>
                So, PBDoom can finally close the gap and serve as a publicly
                available Doom for PocketBook.
              </p>

              <h2 id="image-dithering-optimization-for-eink">
                Image dithering: optimization for eInk
              </h2>
              <p>
                As noted before, eInk displays have low refresh rate. This
                requires some workarounds.
              </p>

              <p>
                eInk displays’s update time depends on the type of update
                needed. For example, replacing a full-white region with a
                full-black region is faster than working with shades of grey.
              </p>

              <p>
                Using this quality, we can increase the refresh rate while
                sacrificing some of the image quality.
              </p>

              <p>
                The
                <code class="language-plaintext highlighter-rouge"
                  >inkview</code
                >
                library provides several functions to dither screen output
                (<code class="language-plaintext highlighter-rouge"
                  >DitherArea</code
                >
                and others).
              </p>

              <p>
                We also can manipulate the colors to improve brightness,
                contrast and do gamma correction to fine tune the output.
              </p>
            </div>
          </article>
        </section>
      </div>

      <footer class="site-footer">
        <div id="footer-contacts">
          <a href="https://t.me/imustafin">Telegram</a>
          <a href="https://github.com/imustafin">GitHub</a>
          <a href="https://www.linkedin.com/in/ilgiz-mustafin-288b99178"
            >LinkedIn</a
          >
        </div>
      </footer>
    </div>
  </body>
</html>
